# Email Verification Code - V2 (V1 is just below)

## What has changed?

We added <strong>2 other functions</strong> to make the verification more secure and more intense.<br>
Now you can confirm with a Token that is generated at the beginning, or confirm with the code and the token at the same time!

## How the changes can be helpful?

With the <strong>Token Code</strong>, you can easily verify the email with a link redirection without restraint!<br>

## Installation

This is a [Node.js](https://nodejs.org/en/) module available through the npm registry.

Installation is done using the [npm install command](https://docs.npmjs.com/downloading-and-installing-packages-locally):

```bash
npm install email-verification-code --save
```

## Usage

```js
const {
  sendCode,
  verifyCode,
  verifyToken,
  verifyBoth,
} = require("email-verification-code");

// Send the code to the User Email.

const data = {
  smtpInfo: {
    host: "0.0.0.0",
    port: 587,
    user: "test@example.com",
    pass: 23454,
  },
  company: {
    name: "FahDev.",
    email: "FahDev@gmail.com",
  },
  mailInfo: {
    emailReceiver: "FahDev1@gmail.com",
    subject: "Code Confirmation",
    text(code, token) {
      return `The Confirmation Code is: ${code} or click in this link: www.test.com/?token=${token}`;
    },
    html(code, token) {
      return `<p>The Confirmation Code is: ${code} or click in this link: www.test.com/?token=${token}</p>`;
    },
  },
};

sendCode(data);

// To verify the code validity

const response = verifyCode("example@email.com", 3429921);

// To verify with the Token code

const response = verifyToken("CunedqBnbxT85jbXLrApHh");

// To verify with both codes

const codes = {
  code: 3429921,
  token: "CunedqBnbxT85jbXLrApHh",
};

const response = verifyBoth(codes);

console.log(response);
```

### smtpInfo

| Option | Type   | Default | Description                                                     | Required |
| ------ | ------ | ------- | --------------------------------------------------------------- | -------- |
| host   | String | null    | SMTP HOST, required to Connect to Your SMTP & Send the mail     | True     |
| port   | Number | 587     | SMTP PORT, required to Connect to Your SMTP & Send the mail     | True     |
| user   | String | null    | SMTP User, required to Connect to Your SMTP & Send the mail     | True     |
| pass   | String | null    | SMTP Password, required to Connect to Your SMTP & Send the mail | True     |

### company

| Option | Type   | Default | Description                              | Required                           |
| ------ | ------ | ------- | ---------------------------------------- | ---------------------------------- |
| name   | String | null    | Your company Name, sent in the FROM tag  | false, One of the two is Required. |
| email  | String | null    | Your company email, sent in the from tag | false, One of the two is Required. |

### mailInfo

| Option        | Type     | Default | Description                                                                                                                | Required                           |
| ------------- | -------- | ------- | -------------------------------------------------------------------------------------------------------------------------- | ---------------------------------- |
| emailReceiver | String   | null    | User or Receiver Email                                                                                                     | True                               |
| subject       | String   | null    | The mail Subject                                                                                                           | False                              |
| text          | Function | ''      | The mail content.<br><strong>NB:</strong> This function must have two parameters which corresponds to the Code & the Token | False, One of the two is Required. |
| html          | Function | ''      | The mail content.<br><strong>NB:</strong> This function must have two parameters which corresponds to the Code & the Token | False, One of the two is Required. |

## How it Work!

The script generates a 6-digit & a token codes with 1 hour validity and saves it locally (For security reasons, please call the backend functions) and then sends an email with the message you had inserted previously.

To check the code, all you need to do is have the email address and the code. The script will look for the code in the local database, compare it, delete it if the code is correct, and give you a response to do so.

# Email Verification Code - V1

With this package, you are able to send email verification codes and confirm them with using only 2 functions!

## Installation

This is a [Node.js](https://nodejs.org/en/) module available through the npm registry.

Installation is done using the [npm install command](https://docs.npmjs.com/downloading-and-installing-packages-locally):

```bash
npm install email-verification-code --save
```

## Usage

```js
const { sendCode, verifyCode } = require("email-verification-code");

// Send the code to the User Email.

const data = {
  smtpInfo: {
    host: "0.0.0.0",
    port: 587,
    user: "test@example.com",
    pass: 23454,
  },
  company: {
    name: "FahDev.",
    email: "FahDev@gmail.com",
  },
  mailInfo: {
    emailReceiver: "FahDev1@gmail.com",
    subject: "Code Confirmation",
    text(code) {
      return `The Confirmation Code is: ${code}`;
    },
    html(code) {
      return `<p>The Confirmation Code is: ${code}</p>`;
    },
  },
};

sendCode(data);

// To verify the code validity

const response = verifyCode("example@email.com", 3429921);

console.log(response);
```

### smtpInfo

| Option | Type   | Default | Description                                                     | Required |
| ------ | ------ | ------- | --------------------------------------------------------------- | -------- |
| host   | String | null    | SMTP HOST, required to Connect to Your SMTP & Send the mail     | True     |
| port   | Number | 587     | SMTP PORT, required to Connect to Your SMTP & Send the mail     | True     |
| user   | String | null    | SMTP User, required to Connect to Your SMTP & Send the mail     | True     |
| pass   | String | null    | SMTP Password, required to Connect to Your SMTP & Send the mail | True     |

### company

| Option | Type   | Default | Description                              | Required                           |
| ------ | ------ | ------- | ---------------------------------------- | ---------------------------------- |
| name   | String | null    | Your company Name, sent in the FROM tag  | false, One of the two is Required. |
| email  | String | null    | Your company email, sent in the from tag | false, One of the two is Required. |

### mailInfo

| Option        | Type     | Default | Description                                                                                                         | Required                           |
| ------------- | -------- | ------- | ------------------------------------------------------------------------------------------------------------------- | ---------------------------------- |
| emailReceiver | String   | null    | User or Receiver Email                                                                                              | True                               |
| subject       | String   | null    | The mail Subject                                                                                                    | False                              |
| text          | Function | ''      | The mail content.<br> <strong>NB:</strong> This function must have only one parameter which corresponds to the Code | False, One of the two is Required. |
| html          | Function | ''      | The mail content.<br> <strong>NB:</strong> This function must have only one parameter which corresponds to the Code | False, One of the two is Required. |

## How it Work!

The script generates a 6-digit code with 1 hour validity and saves it locally (For security reasons, please call the backend functions) and then sends an email with the message you had inserted previously.

To check the code, all you need to do is have the email address and the code. The script will look for the code in the local database, compare it, delete it if the code is correct, and give you a response to do so.

## License

[MIT](https://choosealicense.com/licenses/mit/)
